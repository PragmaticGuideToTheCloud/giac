baseDir: examples/hello-ssh-iac/
cfg:
  templatesDir: /Users/gajdaw/pgttc/giac/src/../templates/
  nunjucks:
    autoescape: false
    tags:
      variableStart: <<<
      variableEnd: '>>>'
      blockStart: <%
      blockEnd: '%>'
    dev: false
    throwOnUndefined: false
    trimBlocks: false
    lstripBlocks: false
  filenameConvertions:
    gitignore: .gitignore
    dockerignore: .dockerignore
    gitkeep: .gitkeep
iterations:
  - __VPC_NAME__: dev
    __ENV_NAME__: dev1
files:
  - src: files/auth/Makefile
    dest: auth/Makefile
  - src: files/helm/deploy.sh
    dest: helm/__VPC_NAME__/__ENV_NAME__/deploy.sh
  - src: files/helm/values.yaml
    dest: helm/__VPC_NAME__/__ENV_NAME__/values.yaml
  - src: files/README.md
    dest: README.md
  - src: files/giac-doc.md
    dest: giac-doc.md
  - src: terraform/terragrunt.hcl
    dest: terraform/terragrunt.hcl
  - src: terraform/gitignore
    dest: terraform/gitignore
  - src: files/docker/dockerfiles/html.Dockerfile
    dest: docker/build/web.Dockerfile
  - src: files/docker/test/docker-compose.yml
    dest: docker/test/docker-compose.yml
  - src: files/docker/build/gitignore
    dest: docker/build/gitignore
  - src: files/docker/build/dockerignore
    dest: docker/build/dockerignore
  - src: files/docker/test/env
    dest: docker/test/.env
  - src: files/docker/build/Makefile
    dest: docker/build/Makefile
dirs:
  - src: ansible
    dest: ansible
  - src: tests
    dest: tests
  - src: vpn
    dest: vpn
  - src: helm-charts/helm-chart-basic
    dest: helm-chart
  - src: ssh-keys
    dest: ssh-keys
  - src: terraform/vpc
    dest: terraform/vpc
  - src: terraform/gke
    dest: terraform/gke
  - src: terraform/gsa
    dest: terraform/gsa
params:
  name: hello-ssh
  description: 'Hello, SSH!'
  app_repo: 'git@github.com:PragmaticGuideToTheCloud/hello-cloud.git'
  provider:
    gcp:
      project_id: gcp_project_id_12345
      vpc:
        bastion_public_key_filename: ~/.ssh/iac_example_id_rsa.pub
        bastion_private_key_filename: ~/.ssh/iac_example_id_rsa
        boilerplate: >-
          git::ssh://git@github.com/PragmaticGuideToTheCloud/gcp-cloud-boilerplate.git//terraform/vpc
      envs:
        - dev/dev1
      gke:
        boilerplate: >-
          git::ssh://git@github.com/PragmaticGuideToTheCloud/gcp-cloud-boilerplate.git//terraform/gke-public-plane
      gsa:
        boilerplate: >-
          git::ssh://git@github.com/PragmaticGuideToTheCloud/gcp-cloud-boilerplate.git//terraform/gsa
      autoZone: false
  bastionHost: 1.2.3.4
  services:
    web:
      url: /
      dockerComposePorts:
        - '80:80'
  container_registry: eu.gcr.io
  terraform:
    - vpc
    - gke
    - gsa
  ansibleBoilerplateUrl: 'git@github.com:PragmaticGuideToTheCloud/gcp-cloud-boilerplate.git'
  containers:
    - name: web
  dockerServices:
    - name: web
      nodePort: 32767
      url: /
      type: NodePort
      dockerComposePorts:
        - '80:80'
      dockerComposeServiceName: web
  helmServices:
    - name: web
      nodePort: 32767
      url: /
      type: NodePort
      dockerComposePorts:
        - '80:80'
      dockerComposeServiceName: web
